datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id            String   @id @default(uuid())
  avatar        String?
  email         String   @unique
  gender        String?
  fullName      String?
  password      String?
  phone         String?
  nationality   String?
  dob           DateTime?

  roles         String[] @default([])  // e.g., "admin", "user", "trainer"
  dietProfile   String[] @default([])  // e.g., "vegan", "keto", "balanced"
  height        Float?   // in cm
  weight        Float?   // in kg
  goals         String?  // e.g., "weight loss", "muscle gain"
  activityLevel String?  // e.g., "sedentary", "active", "very active"

  plans         Plan[]   // 1-to-many relation with Plan

  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

model Plan {
  id             String    @id @default(uuid())
  user           User?     @relation(fields: [userId], references: [id])
  userId         String?

  status         String?   @default("active")
  estimatedPrice Float?
  type           String?
  noMeals        Int?
  noDays         Int?
  specifyDays    String[] @default([]) // optional array of days (Mon, Tue, etc.)
  startDate      DateTime?
  expiryDate     DateTime?

  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}
